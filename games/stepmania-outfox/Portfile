# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem 1.0

name                stepmania-outfox
set alpha_version   "4.9.7GG"
set main_version    5.3.0
version             ${main_version}-a${alpha_version}
categories          games aqua
platforms           macosx
maintainers         {gmail.com:audvare @Tatsh}
description         StepMania OutFox is an open source rhythm game engine.
long_description    StepMania 5.3.0 \"OutFox\" provides an upgraded experience \
                    for all players new and old. It still supports over two \
                    decades of existing content, and lays the groundwork for \
                    the next.
homepage            https://projectmoon.dance/
distfiles           StepManiaOutFox-${main_version}-alpha-${alpha_version}-MacOS-Intel-date-20210223.dmg \
                    StepManiaOutFox-${main_version}-alpha-${alpha_version}-MacOS-M1-date-20210223.dmg
master_sites        https://github.com/TeamRizu/OutFox/releases/download/OF${alpha_version}/
supported_archs     arm64 x86_64
license             EULA

livecheck.type      regex
livecheck.url       https://github.com/TeamRizu/OutFox/tags
livecheck.version   ${alpha_version}
livecheck.regex     "/tag/OF(\\d+\\.\\d+\\.\\d+)"

checksums           StepManiaOutFox-5.3.0-alpha-4.9.7GG-MacOS-Intel-date-20210223.dmg \
                    rmd160  9f85d5440b9e2ab7b6fde6946d10e1a044d59554 \
                    sha256  8c4f2307c73d2e71ccff40131fafee616a282d80eaa583c8202427a57638d53f \
                    size    108811552 \
                    StepManiaOutFox-5.3.0-alpha-4.9.7GG-MacOS-M1-date-20210223.dmg \
                    rmd160  53d04db37fb7bfc3c2d17f07bb2146c6806f78e1 \
                    sha256  dd785d5b7dab646445f4dc1483378c479ff642b4ebf18b691d691a561ef7212b \
                    size    106445147

use_configure       no
use_dmg             yes

if {${os.arch} eq "arm64"} {
    extract.only StepManiaOutFox-${main_version}-alpha-${alpha_version}-MacOS-M1-date-20210223.dmg
} else {
    extract.only StepManiaOutFox-${main_version}-alpha-${alpha_version}-MacOS-Intel-date-20210223.dmg
}
extract.mkdir       no

build {}

destroot {
    copy "${worksrcpath}/StepMania" "${destroot}${applications_dir}/StepMania OutFox"
}
