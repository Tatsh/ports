PortSystem          1.0
PortGroup           xcode 1.0

set                 gh_commit   2ee66f3
set                 gh_user     DanielStormApps
set                 gh_project  Fanny

name                ${gh_project}
version             1.0.3
categories-append   sysutils
license             GPL-3
maintainers         {gmail.com:audvare @Tatsh}
description         Monitor your Mac's fan speed and CPU temperature from your Notification Center.
long_description    ${description}
homepage            https://github.com/DanielStormApps/Fanny/

supported_archs     x86_64

master_sites        ${homepage}/tarball/${gh_commit}
distname            ${gh_project}-${gh_commit}
worksrcdir          ${gh_user}-${distname}/

checksums           rmd160  2ca7d8ffd89b4759edb39b94c58a3026b33a7dc2 \
                    sha256  b42cc63efb9b5c5aaebf478fd11671137539050d60f56b4a91d19399bfa522be \
                    size    798504

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     "Download\\s+<span>v(\\d+\[^<\]+)"

xcode.target        Fanny
xcode.configuration Release
xcode.build.settings \
    CODE_SIGN_IDENTITY=- \
    CODE_SIGN_STYLE=Manual
xcode.destroot.settings \
    CODE_SIGN_IDENTITY=- \
    CODE_SIGN_STYLE=Manual

# Compile and install in one step, for now. See https://trac.macports.org/ticket/57137
build {}

if {${os.major} < 16} {
    pre-fetch {
        ui_error "${name} @${version} requires OS X 10.12 or later."
        return -code error "incompatible OS X version"
    }
}
