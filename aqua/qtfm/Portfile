PortSystem          1.0
PortGroup           qmake5 1.0
PortGroup           github 1.0

set gh_user         rodlie
set gh_project      qtfm
set icons_hash      40150835b9475d259035a18381d24a64b2a489a9

github.setup        ${gh_user} ${gh_project} 6.2.0

license             GPL-2
description         Desktop-independent file manager.
long_description    ${description}
platforms           darwin freebsd linux
maintainers         {gmail.com:audvare @Tatsh}
categories          aqua

distfiles           ${name}-${version}.tar.gz:qtfm \
                    ${icons_hash}.tar.gz:icons
worksrcdir          ${gh_user}-${gh_project}-dc3dcb9
master_sites        ${github.homepage}/tarball/${git.branch}:qtfm \
                    https://github.com/${gh_user}/adwaita-bundle/archive:icons

checksums           qtfm-6.2.0.tar.gz \
                    rmd160  4470a31b6391365621250a65f2a89790d5a42587 \
                    sha256  3e31142604f1fe0e6c27465f6997d312ec174de4a93e2eb557de91dd45b6dc5c \
                    size    411126 \
                    40150835b9475d259035a18381d24a64b2a489a9.tar.gz \
                    rmd160  eabf32f7da0a0be1226131cb415008592bc70ce4 \
                    sha256  bbe1fad79eb16565e5c14bd9181103dabdb9049d8549c1af84d0804d041b367e \
                    size    10115186

depends_lib         port:libinotify-kqueue

pre-configure {
    file copy "${workpath}/adwaita-bundle-${icons_hash}/adwaita.qrc" \
        "${worksrcpath}/fm/bundle/"
    file copy "${workpath}/adwaita-bundle-${icons_hash}/Adwaita" \
        "${worksrcpath}/fm/bundle/"
}

destroot {
    file copy "${worksrcpath}/fm/QtFM.app" "${destroot}/${applications_dir}/"
}
