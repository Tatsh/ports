# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           xcode 1.0
PortGroup           github 1.0

name                Commandant
version             0.18.0
github.setup        Carthage ${name} ${version}
revision            0

license             MIT
maintainers         {gmail.com:audvare @Tatsh}
description         Type-safe command line argument handling.
long_description    ${description}
categories          devel

master_sites        ${github.homepage}/tarball/${git.branch}:commandant \
                    https://github.com/xcconfigs/xcconfigs/tarball/1.1:xcconfigs
worksrcdir          Carthage-${name}-a1671cf
distfiles           ${name}-${version}.tar.gz:commandant \
                    xcconfigs-xcconfigs-1.1.tar.gz:xcconfigs

checksums           Commandant-0.18.0.tar.gz \
                    rmd160  e9e710811f9e6d20e6fdd182f16c506bb6e2333c \
                    sha256  fdb85375d589b486bf4e7430176e4361a584fe1c438d42f1c05f8bea5eeb6f49 \
                    size    23604 \
                    xcconfigs-xcconfigs-1.1.tar.gz \
                    rmd160  8fa0eeac2acf8f4a1e188af3fe837be8f9e12d6a \
                    sha256  b88846b6c6a48112ec3daed279e55aef028984e0bce0cf39184871f34c9e768b \
                    size    9157

xcode.target        Commandant
xcode.configuration Release
xcode.build.settings \
    CODE_SIGN_IDENTITY=- \
    CODE_SIGN_STYLE=Manual
xcode.destroot.settings \
    CODE_SIGN_IDENTITY=- \
    CODE_SIGN_STYLE=Manual

set gh_hash 4ced0ad

pre-configure {
    file copy "${workpath}/xcconfigs-xcconfigs-${gh_hash}/Base" \
        "${worksrcpath}/Carthage/Checkouts/xcconfigs/Base"
    file copy "${workpath}/xcconfigs-xcconfigs-${gh_hash}/Mac OS X" \
        "${worksrcpath}/Carthage/Checkouts/xcconfigs/Mac OS X"
    file copy "${workpath}/xcconfigs-xcconfigs-${gh_hash}/macOS" \
        "${worksrcpath}/Carthage/Checkouts/xcconfigs/macOS"
}

destroot {
    file copy ${worksrcpath}/build/Release/Commandant.framework \
        ${destroot}${prefix}/Library/Frameworks/
}
